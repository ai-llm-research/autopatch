

struct platform_device {
    struct device {
        // Placeholder for device structure
    } dev;
};

struct resource {
    unsigned long start;
    // Placeholder for resource structure
};

typedef int size_t;
#define EINVAL 22
#define IORESOURCE_MEM 0

typedef void * iOmem;

void *__ERR_PTR(int error) {
    return (void *)(long)error; // Use void pointer
}

struct resource *platform_get_resource_byname(struct platform_device *pdev, int type, char *name) {
    // Placeholder for platform_get_resource_byname
    return (struct resource *)0; // Use 0 (null pointer)
}

void dev_err(struct device *dev, const char *msg, ...) {
    // Placeholder for dev_err
}

size_t resource_size(const struct resource *res) {
    // Placeholder for resource_size
    return 0;
}

void *__devm_ioremap(struct device *dev, unsigned long offset, size_t size) {
    // Placeholder for devm_ioremap
    return (void *)0; // Use void pointer 0 (null pointer)
}

#define IS_ERR(x) ((long)(x) < 0) // Adjust IS_ERR to cast to long

void *_th1520_map_mmio(struct platform_device *pdev, char *res_name, size_t offset) {
    iOmem mapped;
    struct resource *res;

    res = platform_get_resource_byname(pdev, IORESOURCE_MEM, res_name);

    if (!res) {
        dev_err(&pdev->dev, "resource %s not found\n", res_name);
        return __ERR_PTR(-EINVAL);
    }
	
    mapped = __devm_ioremap(&pdev->dev, res->start + offset, resource_size(res) - offset);
	
	if (IS_ERR(mapped))
	dev_err(&pdev->dev, "failed to map resource %s\n", res_name);
	
	return mapped;
}

