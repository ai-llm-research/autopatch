

typedef int size_t;

#define IORESOURCE_MEM 0
#define EINVAL 22
#define MAX_ERRNO 4095

typedef int bool;

#define IS_ERR_VALUE(x) ((x) >= (unsigned long)-MAX_ERRNO)
#define ERR_PTR(error) ((void *)(unsigned long)(error))

struct resource {
    size_t start;
};

struct platform_device {
    struct {
        /* Assuming this is a device structure with some properties */
    } dev;
};

void dev_err(struct platform_device *pdev, const char *fmt, ...) {}

struct resource* platform_get_resource_byname(struct platform_device *pdev, unsigned int type, const char *name) {
    return 0; // Dummy return
}

size_t resource_size(const struct resource *res) {
    return 0; // Dummy return
}

void* devm_ioremap(struct platform_device *pdev, size_t offset, size_t size) {
    return 0; // Dummy return
}

static inline bool IS_ERR(const void *ptr) {
    return IS_ERR_VALUE((unsigned long)ptr);
}

typedef void __iomem;

static __iomem *th1520_map_mmio(struct platform_device *pdev, char *res_name, size_t offset) {
    void *mapped;
    struct resource *res;

    res = platform_get_resource_byname(pdev, IORESOURCE_MEM, res_name);

    if (!res) {
        dev_err(pdev, "Failed to get resource: %s\n", res_name);
        return ERR_PTR(-EINVAL);
    }

    mapped = devm_ioremap(pdev, res->start + offset, resource_size(res) - offset);
    if (IS_ERR(mapped))
        dev_err(pdev, "Failed to map resource: %s\n", res_name);

    return (__iomem *)mapped;
}

