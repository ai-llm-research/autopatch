

struct device {
    // Stub struct, as the definition is missing
};

struct net_device {
    // Stub struct, as the definition is missing
};

struct ravb_private {
    int wol_enabled;
    struct {
        struct device dev;
    } *pdev;
    int *rstc;
};

struct net_device* dev_get_drvdata(struct device *dev) {
    // Stub function
    return 0;
}

struct ravb_private* netdev_priv(struct net_device *ndev) {
    // Stub function
    return 0;
}

int netif_running(struct net_device *ndev) {
    // Stub function
    return 0;
}

void netif_device_detach(struct net_device *ndev) {
    // Stub function
}

int ravb_wol_setup(struct net_device *ndev) {
    // Stub function
    return 0;
}

int ravb_close(struct net_device *ndev) {
    // Stub function
    return 0;
}

int pm_runtime_force_suspend(struct device *dev) {
    // Stub function
    return 0;
}

int reset_control_assert(int *rstc) {
    // Stub function
    return 0;
}

static int ravb_suspend(struct device *dev)
{
    struct net_device *ndev = dev_get_drvdata(dev);
    struct ravb_private *priv = netdev_priv(ndev);
    int ret;

    if (!netif_running(ndev))
        goto reset_assert;

    netif_device_detach(ndev);

    if (priv->wol_enabled)
        return ravb_wol_setup(ndev);

    ret = ravb_close(ndev);
    if (ret)
        return ret;

    ret = pm_runtime_force_suspend(&priv->pdev->dev);
    if (ret)
        return ret;

reset_assert:
    return reset_control_assert(priv->rstc);
}

