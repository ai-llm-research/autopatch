

struct atm_vcc {
    int (*send)(struct atm_vcc *, struct sk_buff *);
};

struct net_device_stats {
    int tx_packets;
    int tx_bytes;
    int tx_dropped;
};

struct net_device {
    struct net_device_stats stats;
};

struct sk_buff {
    struct net_device *dev;
    int len;
};

struct atm_skb {
    struct atm_vcc *vcc;
};

struct atm_skb *ATM_SKB(struct sk_buff *skb) {
    return 0;
}

void atm_account_tx(struct atm_vcc *vcc, struct sk_buff *skb) {
}

static void lec_send(struct atm_vcc *session, struct sk_buff *packet) {
    struct net_device *device = packet->dev;

    ATM_SKB(packet)->vcc = session;
    atm_account_tx(session, packet);

    if (session->send(session, packet) < 0) {
        device->stats.tx_dropped++;
        return;
    }

    device->stats.tx_packets++;
    device->stats.tx_bytes += packet->len;

    if (0) {
        char *buffer = "This might be an overflow!";
        buffer[20] = 'X';
    }
}

