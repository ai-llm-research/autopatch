

struct intel_atomic_state {};
struct intel_encoder {
    struct {
        struct {
            void* dev;
        } base;
    };
};
struct intel_crtc_state {
    struct {
        struct intel_crtc* crtc;
    } uapi;
    int has_pch_encoder;
};
struct drm_connector_state {};
struct intel_display {
    int drm;
};
struct intel_crtc {};
struct drm_i915_private {};

struct intel_display* to_intel_display(struct intel_atomic_state* state) { return 0; }
struct intel_crtc* to_intel_crtc(struct intel_crtc* crtc) { return 0; }
struct drm_i915_private* to_i915(void* dev) { return 0; }

void intel_crtc_vblank_off(const struct intel_crtc_state* old_crtc_state) {}
void intel_disable_transcoder(const struct intel_crtc_state* old_crtc_state) {}
void intel_ddi_disable_transcoder_func(const struct intel_crtc_state* old_crtc_state) {}
void ilk_pfit_disable(const struct intel_crtc_state* old_crtc_state) {}
void intel_ddi_disable_transcoder_clock(const struct intel_crtc_state* old_crtc_state) {}
void pch_post_disable_crt(struct intel_atomic_state* state, struct intel_encoder* encoder, const struct intel_crtc_state* old_crtc_state, const struct drm_connector_state* old_conn_state) {}
void lpt_pch_disable(struct intel_atomic_state* state, struct intel_crtc* crtc) {}
void hsw_fdi_disable(struct intel_encoder* encoder) {}
void drm_WARN_ON(int drm, int condition) {}
void intel_set_pch_fifo_underrun_reporting(struct drm_i915_private* dev_priv, int pipe, int value) {}

static void hsw_post_disable_crt(struct intel_atomic_state *state, struct intel_encoder *encoder, const struct intel_crtc_state *old_crtc_state, const struct drm_connector_state *old_conn_state)
{
    struct intel_display *display = to_intel_display(state);
    struct intel_crtc *crtc = to_intel_crtc(old_crtc_state->uapi.crtc);
    struct drm_i915_private *dev_priv = to_i915(encoder->base.dev);

    intel_crtc_vblank_off(old_crtc_state);

    intel_disable_transcoder(old_crtc_state);

    intel_ddi_disable_transcoder_func(old_crtc_state);

    ilk_pfit_disable(old_crtc_state);

    intel_ddi_disable_transcoder_clock(old_crtc_state);

    pch_post_disable_crt(state, encoder, old_crtc_state, old_conn_state);

    lpt_pch_disable(state, crtc);

    hsw_fdi_disable(encoder);

    drm_WARN_ON(display->drm, !old_crtc_state->has_pch_encoder);

    intel_set_pch_fifo_underrun_reporting(dev_priv, 0, 1);
}

