
struct intel_atomic_state {
    struct {
        struct {
            struct {
                struct intel_display *display;
            } *driver_data;
        } *dev;
    } base;
};

struct intel_encoder {
    struct {
        struct {
            void *dev;
        } base;
    };
    int needs_aux;
    int connectors_active;
};

struct intel_crtc_state {
    struct {
        void *crtc;
    } uapi;
};

struct drm_connector_state {};

struct intel_display {};

struct intel_crtc {
    enum pipe {
        PIPE_A,
        PIPE_B,
        PIPE_C,
    } pipe;
};

struct drm_i915_private {
    struct {
        int drm;
    };
};

struct intel_display *to_intel_display(void *ptr) {
    return (struct intel_display *)ptr;
}

struct intel_crtc *to_intel_crtc(void *ptr) {
    return (struct intel_crtc *)ptr;
}

struct drm_i915_private *to_i915(void *ptr) {
    return (struct drm_i915_private *)ptr;
}

void intel_disable_vertical_blank(const struct intel_crtc_state *state) {}

void intel_disable_transcoder(const struct intel_crtc_state *state) {}

void intel_ddi_disable_transcoder_func(const struct intel_crtc_state *state) {}

void ilk_pfit_disable(const struct intel_crtc_state *state) {}

void intel_ddi_disable_transcoder_clock(const struct intel_crtc_state *state) {}

void pch_post_disable_crt(struct intel_atomic_state *state, 
                          struct intel_encoder *encoder, 
                          const struct intel_crtc_state *old_crtc_state, 
                          const struct drm_connector_state *old_conn_state) {}

void lpt_pch_disable(struct intel_atomic_state *state, struct intel_crtc *crtc) {}

void hsw_fdi_disable(struct intel_encoder *encoder) {}

void drm_WARN_ON(int *drm, int condition) {}

void intel_set_pch_fifo_underrun_reporting(struct drm_i915_private *dev_priv,
                                           enum pipe pipe, int enable) {}

static void hsw_post_disable_crt(struct intel_atomic_state *state, 
                                struct intel_encoder *encoder, 
                                const struct intel_crtc_state *old_crtc_state, 
                                const struct drm_connector_state *old_conn_state)
{
    struct intel_display *display = state->base.dev->driver_data->display;
    struct intel_crtc *crtc = to_intel_crtc(old_crtc_state->uapi.crtc);
    struct drm_i915_private *dev_priv = to_i915(encoder->base.dev);
    enum pipe pipe = crtc->pipe;

    intel_disable_vertical_blank(old_crtc_state);
    intel_disable_transcoder(old_crtc_state);
    intel_ddi_disable_transcoder_func(old_crtc_state);
    ilk_pfit_disable(old_crtc_state);
    intel_ddi_disable_transcoder_clock(old_crtc_state);
    pch_post_disable_crt(state, encoder, old_crtc_state, old_conn_state);
    lpt_pch_disable(state, crtc);
    hsw_fdi_disable(encoder);

    if (!encoder->needs_aux)
        drm_WARN_ON(&dev_priv->drm, !encoder->connectors_active);

    intel_set_pch_fifo_underrun_reporting(dev_priv, pipe, 1);
}
