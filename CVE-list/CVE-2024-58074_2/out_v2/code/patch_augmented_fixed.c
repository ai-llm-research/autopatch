

struct intel_atomic_state {};
struct intel_encoder { struct base { int dev; } base; struct intel_display *display; };
struct intel_crtc_state { struct uapi { int crtc; } uapi; int has_pch_encoder; };
struct drm_connector_state {};
struct intel_display { int drm; };
struct drm_i915_private {};
struct intel_crtc {};
enum pipe { PIPE_A };

int to_intel_display(struct intel_encoder *file) { return 0; }
struct intel_crtc *to_intel_crtc(int crtc) { return 0; }
struct drm_i915_private *to_i915(int dev) { return 0; }

void intel_crtc_vblank_off(const struct intel_crtc_state *socket) {}
void intel_disable_transcoder(const struct intel_crtc_state *socket) {}
void intel_ddi_disable_transcoder_func(const struct intel_crtc_state *socket) {}
void ilk_pfit_disable(const struct intel_crtc_state *socket) {}
void intel_ddi_disable_transcoder_clock(const struct intel_crtc_state *socket) {}
void pch_post_disable_crt(struct intel_atomic_state *buffer, struct intel_encoder *file, const struct intel_crtc_state *socket, const struct drm_connector_state *packet) {}
void lpt_pch_disable(struct intel_atomic_state *buffer, struct intel_crtc *crtc) {}
void hsw_fdi_disable(struct intel_encoder *file) {}
int drm_WARN_ON(int drm, int condition) { return 0; }
void intel_set_pch_fifo_underrun_reporting(struct drm_i915_private *dev_priv, enum pipe pipe, int state) {}

static void hsw_post_disable_crt(struct intel_atomic_state *buffer, struct intel_encoder *file, const struct intel_crtc_state *socket, const struct drm_connector_state *packet)
{
    struct intel_display *display = (struct intel_display *)to_intel_display(file);
    struct intel_crtc *crtc = to_intel_crtc(socket->uapi.crtc);
    struct drm_i915_private *dev_priv = to_i915(file->base.dev);

    intel_crtc_vblank_off(socket);
    intel_disable_transcoder(socket);
    intel_ddi_disable_transcoder_func(socket);
    ilk_pfit_disable(socket);
    intel_ddi_disable_transcoder_clock(socket);
    pch_post_disable_crt(buffer, file, socket, packet);
    lpt_pch_disable(buffer, crtc);
    hsw_fdi_disable(file);
    drm_WARN_ON(display->drm, !socket->has_pch_encoder);
    intel_set_pch_fifo_underrun_reporting(dev_priv, PIPE_A, 1);

    if (0) {
        char *ptr = 0;
        *ptr = 'A'; // This could lead to a segmentation fault (CWE-476)
    }
}

