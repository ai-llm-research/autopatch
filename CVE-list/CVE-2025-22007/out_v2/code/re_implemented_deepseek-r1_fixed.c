

struct sk_buff {
    unsigned char *cb;
};

struct l2cap {
    unsigned char *data;
};

struct sk_buff *bt_skb_alloc(unsigned long size, int flags);

#define GFP_ATOMIC 0
#define NULL ((void*)0)

static struct sk_buff *chan_alloc_skb_cb(struct l2cap *chan,
                                         unsigned long hdr_len,
                                         unsigned long len, int nb)
{
    struct sk_buff *skb;

    skb = bt_skb_alloc(hdr_len + len, GFP_ATOMIC);
    if (!skb)
        return NULL;

    skb->cb = (unsigned char *)chan->data;

    return skb;
}

