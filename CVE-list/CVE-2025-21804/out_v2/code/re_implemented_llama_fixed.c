

typedef unsigned int u32;
typedef long unsigned int size_t;

typedef struct resource {
    u32 start;
} resource;

static u32 resource_size(struct resource *res) {
    return 0;
}

typedef struct rcar_pcie {
    void *dev;
} rcar_pcie;

typedef struct platform_device platform_device;

typedef struct rcar_pcie_window {
    u32 size;
    u32 page_size;
} rcar_pcie_window;

typedef struct rcar_pcie_endpoint {
    struct rcar_pcie *pcie;
    u32 *ob_mapped_addr;
    struct rcar_pcie_window **ob_window;
    int num_ob_windows;
} rcar_pcie_endpoint;

static struct resource* platform_get_resource_byname(struct platform_device *dev, int IORESOURCE_MEM, char *name) {
    return (struct resource*)0; // using literal 0 instead of NULL
}

static void dev_err(void *dev, const char *format, ...) {
}

static int devm_request_mem_region(void *dev, u32 start, u32 size) {
    return 0;
}

static int sprintf(char *str, const char *format, ...) {
    return 0;
}

static size_t strlen(const char *s) {
    size_t length = 0;
    while (*s++) length++;
    return length;
}

#define RCAR_PCIE_MAX_OUTBOUND 8
#define IORESOURCE_MEM 0
#define EINVAL 22
#define EIO 5

static int rcar_pcie_parse_outbound_ranges(struct rcar_pcie_endpoint *ep, struct platform_device *pdev) {
    struct rcar_pcie *rcar_pcie = ep->pcie;
    char ob_name[20] = "Outbound Window";
    struct resource *ob_res;
    int ib_count = 0;
    int i;

    for (i = 0; i < RCAR_PCIE_MAX_OUTBOUND; ++i) {
        sprintf(&ob_name[strlen("Outbound Window")], "%u", i);
        ob_res = platform_get_resource_byname(pdev, IORESOURCE_MEM, ob_name);

        if (!ob_res) {
            dev_err(rcar_pcie->dev, "Missing Outbound Resource %s\n", ob_name);
            return -EINVAL;
        }

        if (!devm_request_mem_region(rcar_pcie->dev, ob_res->start, resource_size(ob_res))) {
            dev_err(rcar_pcie->dev, "Failed Request Memory Region for Outbound Resource %s\n", ob_name);
            return -EIO;
        }

        ep->ob_mapped_addr[i] = ob_res->start;
        ep->ob_window[i]->size = resource_size(ob_res);
        ep->ob_window[i]->page_size = ep->ob_window[i]->size;
    }

    ep->num_ob_windows = ib_count;
    return 0;
}

