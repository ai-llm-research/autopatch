

typedef unsigned int resource_size_t;

struct rcar_pcie {
    void *dev;
};

struct rcar_pcie_endpoint {
    struct rcar_pcie pcie;
    unsigned int num_ob_windows;
    struct {
        resource_size_t phys_base;
        resource_size_t size;
        resource_size_t page_size;
    } ob_window[32]; // Assuming a maximum of 32 resources for example.
};

struct resource {
    resource_size_t start;
};

struct platform_device {
    struct {
        void *dev;
    } dev;
};

int dev_err(void *dev, const char *fmt, ...) {
    return 0;
}

struct resource *platform_get_resource_byname(struct platform_device *pdev, int type, const char *name) {
    return 0; // Use 0 instead of NULL
}

int devm_request_mem_region(void *dev, resource_size_t start, resource_size_t n, const char *name) {
    return 1;
}

resource_size_t resource_size(const struct resource *res) {
    return 1;
}


int sprintf(char *str, const char *format, ...) {
    return 0;
}

#define IORESOURCE_MEM 0
#define RCAR_PCI_MAX_RESOURCES 32
#define EINVAL 22
#define EIO 5

static int rcar_pcie_parse_outbound_ranges(struct rcar_pcie_endpoint *ep, struct platform_device *pdev)
{
    struct rcar_pcie *pcie = &ep->pcie;
    char outbound_name[10];
    struct resource *res;
    unsigned int i = 0;

    ep->num_ob_windows = 0;
    for (i = 0; i < RCAR_PCI_MAX_RESOURCES; i++) {
        sprintf(outbound_name, "memory%u", i);
        res = platform_get_resource_byname(pdev,
                                           IORESOURCE_MEM,
                                           outbound_name);
        if (!res) {
            dev_err(pcie->dev, "missing outbound window %u\n", i);
            return -EINVAL;
        }
        if (!devm_request_mem_region(&pdev->dev, res->start,
                                     resource_size(res),
                                     outbound_name)) {
            dev_err(pcie->dev, "Cannot request memory region %s.\n",
                    outbound_name);
            return -EIO;
        }

        ep->ob_window[i].phys_base = res->start;
        ep->ob_window[i].size = resource_size(res);
        ep->ob_window[i].page_size = resource_size(res);
    }
    ep->num_ob_windows = i;

    return 0;
}

