
typedef struct qaic_device qaic_device;
typedef struct qaic_attach_slice_entry qaic_attach_slice_entry;
typedef unsigned int u32;
typedef unsigned long long u64;
typedef int bool;

static int EINVAL = -22;

bool invalid_sem(void *sem);

struct qaic_attach_slice_entry {
    int db_len;
    void *sem0;
    void *sem1;
    void *sem2;
    void *sem3;
    u64 offset;
    u64 size;
};

static int qaic_validate_req(struct qaic_device *qdev, struct qaic_attach_slice_entry *slice_ent,
                             u32 count, u64 total_size)
{
    int i;

    for (i = 0; i < count; i++) {
        if (!(slice_ent[i].db_len == 32 || slice_ent[i].db_len == 16 ||
              slice_ent[i].db_len == 8 || slice_ent[i].db_len == 0)) {
            return -EINVAL;
        }
        
        if (invalid_sem(&slice_ent[i].sem0) || invalid_sem(&slice_ent[i].sem1) ||
            invalid_sem(&slice_ent[i].sem2) || invalid_sem(&slice_ent[i].sem3)) {
            return -EINVAL;
        }

        if (slice_ent[i].offset + slice_ent[i].size > total_size) {
            return -EINVAL;
        }
    }

    return 0;
}
