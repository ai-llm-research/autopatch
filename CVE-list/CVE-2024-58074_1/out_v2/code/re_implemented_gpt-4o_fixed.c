

struct intel_atomic_state {};
struct intel_encoder {
    struct {
        struct drm_i915_private *dev;
    } base;
};
struct intel_crtc_state {
    int has_pch_encoder;
};
struct drm_connector_state {};
struct intel_display {};
struct drm_i915_private {
    struct {
    } drm;
};

struct intel_display *to_intel_display(struct intel_atomic_state *state) {
    return 0; // Use 0 instead of nullptr for C code
}

struct drm_i915_private *to_i915(void *dev) {
    return 0; // Use 0 instead of nullptr for C code
}

void drm_WARN_ON(void *drm, int condition) {}

enum { PIPE_A };

void intel_set_pch_fifo_underrun_reporting(struct drm_i915_private *dev_priv, int pipe, int enable) {}

static void hsw_disable_crt(struct intel_atomic_state *state, struct intel_encoder *encoder, const struct intel_crtc_state *old_crtc_state, const struct drm_connector_state *old_conn_state)
{
    // Convert the atomic state to an intel_display structure
    struct intel_display *display = to_intel_display(state);

    // Convert the encoder's base device to a drm_i915_private structure
    struct drm_i915_private *dev_priv = to_i915(encoder->base.dev);

    // Log a warning if the old CRTC state does not have a PCH encoder
    if (!old_crtc_state->has_pch_encoder)
        drm_WARN_ON(&dev_priv->drm, 1);

    // Disable PCH FIFO underrun reporting for PIPE_A
    intel_set_pch_fifo_underrun_reporting(dev_priv, PIPE_A, 0); // Use 0/1 instead of false/true for C code
}

