

struct intel_atomic_state {
    struct {
        struct device *dev;
    } base;
};

struct intel_encoder {
    int port;
};

struct intel_crtc_state {
    int has_pch_encoder; // changed from bool to int
    struct {
        int enabled; // changed from bool to int
    } pch_pfit;
};

struct drm_connector_state {
    void *crtc;
    void *best_encoder;
};

struct intel_display {
    // Stub definition for intel_display
};

struct device {
    struct intel_display display;
    // Stub definition for device
};

struct drm_i915_private {
    // Stub definition for drm_i915_private
};

struct drm_i915_private *to_i915(struct device *dev) {
    // Stub function
    return 0; // changed nullptr to 0
}

void WARN(int condition, const char *message) {
    // Stub function
}

void intel_set_pch_fifo_underrun_reporting(struct drm_i915_private *dev_priv, int port, int reporting) {
    // Stub function
}

void hsw_disable_crt(struct intel_atomic_state *state, struct intel_encoder *encoder, const struct intel_crtc_state *old_crtc_state, const struct drm_connector_state *old_conn_state)
{
    struct intel_display *display = &state->base.dev->display;
    struct drm_i915_private *dev_priv = to_i915(state->base.dev);

    if (!old_crtc_state || !old_conn_state)
        return;

    if ((old_crtc_state->has_pch_encoder && !old_crtc_state->pch_pfit.enabled) !=
        (!old_conn_state->crtc || !old_conn_state->best_encoder))
        WARN(1, "Invalid PCH encoder state\n");

    if (old_crtc_state->has_pch_encoder)
        intel_set_pch_fifo_underrun_reporting(dev_priv,
                                              encoder->port,
                                              0); // changed false to 0
}

