

struct intel_atomic_state;
struct intel_display {
    int drm;
};
struct intel_encoder {
    struct {
        int dev;
    } base;
};
struct intel_crtc_state {
    int has_pch_encoder;
};
struct drm_connector_state;
struct drm_i915_private;

struct intel_display* to_intel_display(struct intel_atomic_state *state) {
    return 0; // Stub implementation
}

struct drm_i915_private* to_i915(int dev) {
    return 0; // Stub implementation
}

void drm_WARN_ON(int drm, int condition) {
    // Stub implementation
}

void intel_set_pch_fifo_underrun_reporting(struct drm_i915_private *dev_priv, int pipe, int enable) {
    // Stub implementation
}

#define PIPE_A 0

static void hsw_disable_crt(struct intel_atomic_state *state, struct intel_encoder *encoder, const struct intel_crtc_state *old_crtc_state, const struct drm_connector_state *old_conn_state)
{
    struct intel_display *display = to_intel_display(state);
    struct drm_i915_private *dev_priv = to_i915(encoder->base.dev);

    drm_WARN_ON(display->drm, !old_crtc_state->has_pch_encoder);

    intel_set_pch_fifo_underrun_reporting(dev_priv, PIPE_A, 0);
}

