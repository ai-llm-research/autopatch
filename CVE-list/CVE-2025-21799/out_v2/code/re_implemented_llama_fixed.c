

struct device {};
struct am65_cpsw_common {
    struct device *dev;
    int tx_ch_num;
    struct am65_cpsw_tx_chn *tx_chns;
};
struct napi_struct {
    int dummy;  // Complete stub for struct napi_struct
};
struct am65_cpsw_tx_chn {
    int irq;
    void *tx_chn;
    void *desc_pool;
    struct napi_struct napi_tx;
};

void devm_remove_action(struct device *dev, void (*action)(void *), void *data) {}
void am65_cpsw_nuss_free_tx_chns(void *data) {}
void devm_free_irq(struct device *dev, int irq, void *dev_id) {}
void netif_napi_del(struct napi_struct *napi) {}

typedef unsigned long size_t;

#define NULL ((void *)0)

int IS_ERR_OR_NULL(const void *ptr) { return ptr == NULL; }

void k3_cppi_desc_pool_destroy(void *pool) {}
void k3_udma_glue_release_tx_chn(void *tx_chn) {}
void *memset(void *s, int c, size_t n) { return s; }  // Modified signature to match expected built-in

void am65_cpsw_nuss_remove_tx_chns(struct am65_cpsw_common *common) {
    struct device *dev = common->dev;
    int i;

    devm_remove_action(dev, am65_cpsw_nuss_free_tx_chns, common);

    for (i = 0; i < common->tx_ch_num; i++) {
        struct am65_cpsw_tx_chn *tx_chn = &common->tx_chns[i];

        if (tx_chn->irq > 0 && !IS_ERR_OR_NULL(tx_chn->tx_chn))
            devm_free_irq(dev, tx_chn->irq, tx_chn);

        netif_napi_del(&tx_chn->napi_tx);

        if (!IS_ERR_OR_NULL(tx_chn->desc_pool))
            k3_cppi_desc_pool_destroy(tx_chn->desc_pool);

        if (!IS_ERR_OR_NULL(tx_chn->tx_chn))
            k3_udma_glue_release_tx_chn(tx_chn->tx_chn);

        memset(tx_chn, 0, sizeof(*tx_chn));
    }
}

