

class PipelineStage {
public:
    static const int kNumPipelineStages = 5;
    PipelineStage() {}
};

class CompositorFrameReporter {
public:
    enum FrameTerminationStatus {
        kDidNotProduceFrame,
        kDidNotPresentFrame
    };

    void TerminateFrame(FrameTerminationStatus status, int now);
};

class Reporter {
public:
    void TerminateFrame(CompositorFrameReporter::FrameTerminationStatus status, int now);
};

class PredictorJankTracker {
public:
    void set_scroll_jank_ukm_reporter(void* reporter);
};

class ScrollJankDroppedFrameTracker {
public:
    void set_scroll_jank_ukm_reporter(void* reporter);
};

class CompositorFrame {
public:
    Reporter* reporter;
};

class CompositorFrameReportingController {
public:
    ~CompositorFrameReportingController();

private:
    int Now();
    bool HasReporterAt(int stage);

    Reporter* reporters_[PipelineStage::kNumPipelineStages];
    // Stubbing std::vector with a simple array for the sake of completeness
    CompositorFrame submitted_compositor_frames_[10]; // Assuming size for demonstration
    PredictorJankTracker* predictor_jank_tracker_;
    ScrollJankDroppedFrameTracker* scroll_jank_dropped_frame_tracker_;
};

CompositorFrameReportingController::~CompositorFrameReportingController() {
    auto now = Now();
    for (int i = 0; i < PipelineStage::kNumPipelineStages; ++i) {
        if (HasReporterAt(i)) {
            reporters_[i]->TerminateFrame(
                CompositorFrameReporter::FrameTerminationStatus::
                    kDidNotProduceFrame,
                now);
        }
    }
    for (auto& frame : submitted_compositor_frames_) {
        if (frame.reporter) {
            frame.reporter->TerminateFrame(
                CompositorFrameReporter::FrameTerminationStatus::
                    kDidNotPresentFrame,
                now);
        }
    }
    predictor_jank_tracker_->set_scroll_jank_ukm_reporter(nullptr);
    scroll_jank_dropped_frame_tracker_->set_scroll_jank_ukm_reporter(nullptr);
}

int CompositorFrameReportingController::Now() {
    return 0;
}

bool CompositorFrameReportingController::HasReporterAt(int stage) {
    return false;
}

void CompositorFrameReporter::TerminateFrame(FrameTerminationStatus status, int now) {}

void Reporter::TerminateFrame(CompositorFrameReporter::FrameTerminationStatus status, int now) {}

void PredictorJankTracker::set_scroll_jank_ukm_reporter(void* reporter) {}

void ScrollJankDroppedFrameTracker::set_scroll_jank_ukm_reporter(void* reporter) {}

