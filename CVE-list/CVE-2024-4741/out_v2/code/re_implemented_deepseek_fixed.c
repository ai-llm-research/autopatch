
struct OSSL_RECORD_LAYER {
    int direction;
    int nextwbuf;
    int numwpipes;
    int curr_rec;
    int num_recs;
    int *wbuf;
    int rbuf;
};

int TLS_BUFFER_get_left(int *buffer) {
    return 0;
}

void tls_release_write_buffer(struct OSSL_RECORD_LAYER *rl) {
}

int tls_release_read_buffer(struct OSSL_RECORD_LAYER *rl) {
    return 1;
}

int tls_free_buffers(struct OSSL_RECORD_LAYER *rl) {
    if (rl->direction == 0) {
        if (rl->nextwbuf < rl->numwpipes) {
            if (rl->nextwbuf != 0 || rl->numwpipes != 1 || TLS_BUFFER_get_left(&rl->wbuf[0]) != 0)
                return 0;
        }
        tls_release_write_buffer(rl);
        return 1;
    }

    if (rl->curr_rec < rl->num_recs || TLS_BUFFER_get_left(&rl->rbuf) != 0)
        return 0;

    return tls_release_read_buffer(rl);
}
