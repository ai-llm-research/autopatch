

typedef int bool;
#define true 1
#define false 0

struct intel_atomic_state {};
struct intel_encoder {
    struct {
        void *dev;
    } base;
};
struct intel_crtc_state {
    struct {
        void *crtc;
    } uapi;
    int has_pch_encoder;
};
struct drm_connector_state {};
struct intel_display {};
struct drm_i915_private {
    struct {
        struct {
            void *dev;
        } pdev;
    } drm;
};
enum pipe { PIPE_A };
struct intel_crtc {
    enum pipe pipe;
};

struct intel_display* to_intel_display(struct intel_atomic_state *state) {
    return 0;
}
struct drm_i915_private* to_i915(void *dev) {
    return 0;
}
struct intel_crtc* to_intel_crtc(void *crtc) {
    return 0;
}
bool drm_WARN_ON(void *drm, bool condition) {
    return false;
}
void intel_ddi_enable_transcoder_func(struct intel_encoder *encoder, const struct intel_crtc_state *crtc_state) {}
void intel_enable_transcoder(const struct intel_crtc_state *crtc_state) {}
void lpt_pch_enable(struct intel_atomic_state *state, struct intel_crtc *crtc) {}
void intel_crtc_vblank_on(const struct intel_crtc_state *crtc_state) {}
void crt_set_dpms(struct intel_encoder *encoder, const struct intel_crtc_state *crtc_state, int mode) {}
void intel_crtc_wait_for_next_vblank(struct intel_crtc *crtc) {}
bool intel_set_cpu_fifo_underrun_reporting(struct drm_i915_private *dev_priv, enum pipe pipe, bool enable) {
    return true;
}
void dev_err_once(void *dev, const char* msg) {}
void intel_set_pch_fifo_underrun_reporting(struct drm_i915_private *dev_priv, enum pipe pipe, bool enable) {}

static void hsw_enable_crt(struct intel_atomic_state *state,
                           struct intel_encoder *encoder,
                           const struct intel_crtc_state *crtc_state,
                           const struct drm_connector_state *conn_state) {
    struct intel_display *display = to_intel_display(state);
    struct drm_i915_private *dev_priv = to_i915(encoder->base.dev);
    struct intel_crtc *crtc = to_intel_crtc(crtc_state->uapi.crtc);
    enum pipe pipe = crtc->pipe;

    drm_WARN_ON(&dev_priv->drm, !crtc_state->has_pch_encoder);

    intel_ddi_enable_transcoder_func(encoder, crtc_state);
    intel_enable_transcoder(crtc_state);
    lpt_pch_enable(state, crtc);
    intel_crtc_vblank_on(crtc_state);
    crt_set_dpms(encoder, crtc_state, /* DRM_MODE_DPMS_ON */ 1);
    intel_crtc_wait_for_next_vblank(crtc);
    intel_crtc_wait_for_next_vblank(crtc);

    if (!intel_set_cpu_fifo_underrun_reporting(dev_priv, pipe, true))
        dev_err_once(&dev_priv->drm.pdev.dev, "Failed to enable CPU FIFO underrun reporting");
    intel_set_pch_fifo_underrun_reporting(dev_priv, PIPE_A, true);
}

