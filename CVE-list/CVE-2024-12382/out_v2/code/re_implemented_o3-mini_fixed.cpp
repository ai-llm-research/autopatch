

class LanguageDetectionModel {
public:
    void NotifyModelLoaded();

private:
    bool loaded_;
    struct function_placeholder {
        void operator()(LanguageDetectionModel&) {}
    };
    template<typename T>
    struct vector_placeholder {
        T* begin() { return nullptr; }
        T* end() { return nullptr; }
        void clear() {}
    };
    vector_placeholder<function_placeholder> model_loaded_callbacks_;
};

void LanguageDetectionModel::NotifyModelLoaded() {
    for (auto& callback_ : model_loaded_callbacks_) {
        callback_(*this);
    }
    loaded_ = true;
    model_loaded_callbacks_.clear();
}

