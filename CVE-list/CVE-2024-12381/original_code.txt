```cpp
bool EqualValueType(ValueType type1, ValueType type2) const {
  if (type1.kind() != type2.kind()) return false;
  if (type1.has_index() &&
	  !EqualTypeIndex(CanonicalTypeIndex{type1.ref_index()},
					  CanonicalTypeIndex{type2.ref_index()})) {
	return false;
  }
  return true;
}
```