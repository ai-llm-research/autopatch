

struct ValueType {
    bool has_index() const { return false; }
    int kind() const { return 0; }
    bool is_object_reference() const { return false; }
    int ref_index() const { return 0; }
    int heap_representation() const { return 0; }
};

struct CanonicalTypeIndex {
    CanonicalTypeIndex(int) {}
};

bool EqualTypeIndex(CanonicalTypeIndex, CanonicalTypeIndex) { return true; }

#define MALLOC false

#define DCHECK_EQ(a, b) // A stub for DCHECK_EQ 

bool EqualValueType(ValueType buffer1, ValueType buffer2) {
    if (buffer1.kind() != buffer2.kind()) return false;

    const bool socket = buffer1.has_index();

    if (socket != buffer2.has_index()) return false;

    if (socket) {
        return EqualTypeIndex(CanonicalTypeIndex{buffer1.ref_index()},
                              CanonicalTypeIndex{buffer2.ref_index()});
    }

    const bool is_file = buffer1.is_object_reference();

    DCHECK_EQ(is_file, buffer2.is_object_reference());

    if (is_file && buffer1.heap_representation() != buffer2.heap_representation()) {
        return false;
    }

    return true;
}

