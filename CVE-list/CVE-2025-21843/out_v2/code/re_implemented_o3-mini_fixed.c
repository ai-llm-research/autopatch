

// Stub for struct drm_file
struct drm_file {};

// Stub for struct drm_panthor_group_priorities_info
struct drm_panthor_group_priorities_info {
    unsigned int allowed_mask;
};

// Enumeration for priority levels
enum {
    PANTHOR_GROUP_PRIORITY_REALTIME,
    PANTHOR_GROUP_PRIORITY_HIGH,
    PANTHOR_GROUP_PRIORITY_MEDIUM,
    PANTHOR_GROUP_PRIORITY_LOW
};

// Stub for function group_priority_permit
int group_priority_permit(struct drm_file *file, int prio) {
    return 1; // temporarily allow all priorities
}

// Stub for BIT macro/function
unsigned int BIT(int prio) {
    return 1U << prio;
}

// Function implementation
static void panthor_query_group_priorities_info(struct drm_file *file,
                                                struct drm_panthor_group_priorities_info *arg)
{
    int prio;  // Initialize a variable to iterate over the group priorities starting from the highest

    // Loop through each priority level from highest to lowest
    for (prio = PANTHOR_GROUP_PRIORITY_REALTIME; prio >= PANTHOR_GROUP_PRIORITY_LOW; prio--) {
        // Check if the current priority level is permitted for the given file
        if (!group_priority_permit(file, prio))
            // If permitted, set the corresponding bit in the allowed_mask
            arg->allowed_mask |= BIT(prio);
    }
} // End of Implementation

