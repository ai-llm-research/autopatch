

typedef unsigned int u32;
typedef int gfp_t;

#define GFP_KERNEL ((gfp_t)0)

typedef struct {} spinlock_t;

struct generic_pm_domain {
    const char *name;
    int (*power_on)(struct generic_pm_domain *domain);
    int (*power_off)(struct generic_pm_domain *domain);
};

struct mmp_pm_domain {
    void *reg;
    u32 power_on;
    u32 reset;
    u32 clock_enable;
    unsigned int flags;
    spinlock_t *lock;
    struct generic_pm_domain genpd;
};

typedef unsigned int size_t;

struct mmp_pm_domain *kzalloc(size_t size, gfp_t flags) {
    return (struct mmp_pm_domain *)0; 
}

void *ERR_PTR(int error) {
    return (void *)0;
}

typedef int bool;

int pm_genpd_init(struct generic_pm_domain *genpd, void *data, bool flag) {
    return 0;
}

int mmp_pm_domain_power_on(struct generic_pm_domain *domain) {
    return 0;
}

int mmp_pm_domain_power_off(struct generic_pm_domain *domain) {
    return 0;
}

#define NULL ((void *)0)

struct generic_pm_domain *mmp_pm_domain_register(const char *name,
        void *reg,
        u32 power_on, u32 reset, u32 clock_enable,
        unsigned int flags, spinlock_t *lock)
{
    struct mmp_pm_domain *pm_domain;

    pm_domain = kzalloc(sizeof(*pm_domain), GFP_KERNEL);
    if (!pm_domain)
        return ERR_PTR(-12); // -ENOMEM is typically -12 in errno.h

    pm_domain->reg = reg;
    pm_domain->power_on = power_on;
    pm_domain->reset = reset;
    pm_domain->clock_enable = clock_enable;
    pm_domain->flags = flags;
    pm_domain->lock = lock;

    pm_genpd_init(&pm_domain->genpd, NULL, 1);
    pm_domain->genpd.name = name;
    pm_domain->genpd.power_on = mmp_pm_domain_power_on;
    pm_domain->genpd.power_off = mmp_pm_domain_power_off;

    return &pm_domain->genpd;
}

