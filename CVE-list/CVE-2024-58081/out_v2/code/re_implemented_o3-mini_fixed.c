

typedef unsigned int u32;
typedef unsigned int size_t;

struct generic_pm_domain {
    const char *name;
    int (*power_on)(struct generic_pm_domain *);
    int (*power_off)(struct generic_pm_domain *);
};

typedef int spinlock_t;

struct mmp_pm_domain {
    struct generic_pm_domain genpd;
    void *reg;
    u32 power_on;
    u32 reset;
    u32 clock_enable;
    unsigned int flags;
    spinlock_t *lock;
};

void *kzalloc(size_t size, int flags) { return 0; }

void kfree(void *ptr) {}

#define NULL ((void *)0)

struct generic_pm_domain *ERR_PTR(int x) {
    return (struct generic_pm_domain *)(size_t)x;
}

int pm_genpd_init(struct generic_pm_domain *genpd, void *gov, int is_runtime) { return 0; }

static int mmp_power_on(struct generic_pm_domain *domain) {
    return 0;
}

static int mmp_power_off(struct generic_pm_domain *domain) {
    return 0;
}

struct generic_pm_domain *mmp_pm_domain_register(const char *name,
        void *reg,
        u32 power_on, u32 reset, u32 clock_enable,
        unsigned int flags, spinlock_t *lock)
{
    struct mmp_pm_domain *pm_domain;

    pm_domain = kzalloc(sizeof(*pm_domain), 0);

    if (!pm_domain)
        return ERR_PTR(12);

    pm_domain->reg = reg;
    pm_domain->power_on = power_on;
    pm_domain->reset = reset;
    pm_domain->clock_enable = clock_enable;
    pm_domain->flags = flags;
    pm_domain->lock = lock;

    if (pm_genpd_init(&pm_domain->genpd, NULL, 1)) {
        kfree(pm_domain);
        return ERR_PTR(12);
    }

    pm_domain->genpd.name = name;
    pm_domain->genpd.power_on = mmp_power_on;
    pm_domain->genpd.power_off = mmp_power_off;

    return &pm_domain->genpd;
}

